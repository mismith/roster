<div ng-controller="EventCtrl">
	<section ng-repeat="status in statuses" ng-show="status.$participants | length">
		<md-subheader class="md-no-sticky">
			<div layout="row">
				<span flex ng-bind="status.name"></span>
				
				<span class="counter">
					<md-tooltip md-direction="left">Guys</md-tooltip>
					<md-icon md-font-set="fa" class="fa-mars"></md-icon> {{ status.$participants | gender:'male' | length }}
				</span>
				<span class="counter">
					<md-tooltip md-direction="left">Girls</md-tooltip>
					<md-icon class="fa fa-venus"></md-icon> {{ status.$participants | gender:'female' | length }}
				</span>
				<span class="counter">
					<md-tooltip md-direction="left">Total</md-tooltip>
					<md-icon class="fa fa-venus-mars"></md-icon> {{ status.$participants | length }}
				</span>
			</div>
		</md-subheader>
		<md-card>
			<md-list>
				<md-list-item ng-repeat="participant in status.$participants = (participants | filterByRsvp:rsvps:status.$id | orderBy:'name')" layout="row">
					<img ng-src="//graph.facebook.com/{{ participant.id }}/picture?type=square" width="40" height="40" class="md-avatar" alt="{{ participant.name }}" />
					<p>{{ participant.name }}</p>
					<md-fab-speed-dial ng-if="canEdit(participant.$id, roster.admins)" md-direction="left" class="md-scale">
						<md-fab-trigger>
							<md-button class="md-fab" ng-class="{'md-success': rsvps[participant.$id].status === 1, 'md-primary': rsvps[participant.$id].status === -1, 'md-warn': rsvps[participant.$id].status === 0}" aria-label="RSVP" ng-switch="rsvps[participant.$id].status">
								<md-icon ng-switch-when="1">check</md-icon>
								<md-icon ng-switch-when="-1">swap_calls</md-icon>
								<md-icon ng-switch-when="0">close</md-icon>
								<md-icon ng-switch-default>more_horiz</md-icon>
							</md-button>
						</md-fab-trigger>
						<md-fab-actions>
							<md-button ng-click="rsvp(participant.$id, 1)" class="md-icon-button md-mini md-success" ng-class="{active: rsvps[participant.$id].status === 1}">
								<md-tooltip>{{ statuses.$getRecord(1).name }}</md-tooltip>
								<md-icon>check</md-icon>
							</md-button>
							<md-button ng-click="rsvp(participant.$id, -1)" class="md-icon-button md-mini md-primary" ng-class="{active: rsvps[participant.$id].status === -1}">
								<md-tooltip>{{ statuses.$getRecord(-1).name }}</md-tooltip>
								<md-icon>swap_calls</md-icon>
							</md-button>
							<md-button ng-click="rsvp(participant.$id, 0)" class="md-icon-button md-mini md-warn" ng-class="{active: rsvps[participant.$id].status === 0}">
								<md-tooltip>{{ statuses.$getRecord(0).name }}</md-tooltip>
								<md-icon>close</md-icon>
							</md-button>
						</md-fab-actions>
					</md-fab-speed-dial>
					<md-button ng-if=" ! canEdit(participant.$id, roster.admins) && rsvps[participant.$id].status !== undefined" class="md-fab" ng-class="{'md-success': rsvps[participant.$id].status === 1, 'md-primary': rsvps[participant.$id].status === -1, 'md-warn': rsvps[participant.$id].status === 0}" aria-label="RSVP" ng-switch="rsvps[participant.$id].status">
						<md-tooltip md-direction="left">{{ statuses.$getRecord(rsvps[participant.$id].status).name }}</md-tooltip>
						<md-icon ng-switch-when="1">check</md-icon>
						<md-icon ng-switch-when="-1">swap_calls</md-icon>
						<md-icon ng-switch-when="0">close</md-icon>
						<md-icon ng-switch-default>more_horiz</md-icon>
					</md-button>
				</md-list-item>
			</md-list>
		</md-card>
	</section>
</div>